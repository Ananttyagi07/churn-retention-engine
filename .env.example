# ============================================
# Customer Churn & Retention Engine
# Environment Configuration Template
# ============================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# ============================================
# Flask Application Settings
# ============================================
FLASK_APP=app
FLASK_ENV=development
FLASK_DEBUG=1
SECRET_KEY=change-this-to-a-random-secret-key-in-production

# Application Settings
APP_NAME="Customer Churn & Retention Engine"
APP_VERSION=1.0.0
API_VERSION=v1

# Server Configuration
HOST=0.0.0.0
PORT=5000
WORKERS=4

# ============================================
# Database Configuration
# ============================================
# PostgreSQL (Production)
DATABASE_URL=postgresql://churn_user:churn_password@localhost:5432/churn_db

# SQLite (Development - uncomment to use)
# DATABASE_URL=sqlite:///data/churn.db

# Connection Pool
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ============================================
# Redis Cache Configuration
# ============================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=churn_

# ============================================
# External API Keys (Free Tier)
# ============================================
# Alpha Vantage (Free: https://www.alphavantage.co/support/#api-key)
ALPHAVANTAGE_API_KEY=your_alphavantage_api_key_here

# Finnhub (Free: https://finnhub.io/register)
FINNHUB_API_KEY=your_finnhub_api_key_here

# Polygon.io (Optional - Free tier available)
POLYGON_API_KEY=your_polygon_api_key_here

# API Rate Limiting
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_PER_MINUTE=60

# ============================================
# Machine Learning Configuration
# ============================================
# Model Settings
MODEL_VERSION=latest
MODEL_REGISTRY_PATH=data/models
ENABLE_MODEL_CACHING=true
MODEL_CACHE_TTL=3600

# Feature Engineering
ENABLE_MARKET_ENRICHMENT=true
ENABLE_SYNTHETIC_FEATURES=true
FEATURE_ENGINEERING_VERSION=1.0

# SHAP Explainability
ENABLE_SHAP=true
SHAP_CACHE_PATH=.shap_cache
SHAP_MAX_DISPLAY=10

# Training Configuration
DEFAULT_TEST_SIZE=0.2
DEFAULT_VALIDATION_SIZE=0.1
RANDOM_STATE=42
CROSS_VALIDATION_FOLDS=5

# Model Selection
PRIMARY_METRIC=roc_auc
MINIMUM_RECALL=0.75
ENABLE_HYPERPARAMETER_TUNING=true

# ============================================
# Monitoring & Logging
# ============================================
# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_PATH=data/logs/app.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# AWS OpenSearch (Optional)
OPENSEARCH_ENABLED=false
OPENSEARCH_HOST=
OPENSEARCH_PORT=443
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=
OPENSEARCH_INDEX=churn-logs
OPENSEARCH_USE_SSL=true

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_EXPORT_PATH=/metrics

# Sentry Error Tracking (Optional)
SENTRY_ENABLED=false
SENTRY_DSN=

# ============================================
# Security Settings
# ============================================
# JWT Authentication
JWT_SECRET_KEY=change-this-jwt-secret-key-in-production
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=2592000

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis://localhost:6379/1

# ============================================
# Email Configuration (Optional)
# ============================================
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your_email@example.com
MAIL_PASSWORD=your_email_password
MAIL_DEFAULT_SENDER=noreply@churnengine.com

# ============================================
# Celery Background Tasks (Optional)
# ============================================
CELERY_BROKER_URL=redis://localhost:6379/2
CELERY_RESULT_BACKEND=redis://localhost:6379/3
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC

# ============================================
# Storage Configuration
# ============================================
# Local Storage
UPLOAD_FOLDER=data/uploads
REPORTS_FOLDER=data/reports
MAX_CONTENT_LENGTH=16777216

# AWS S3 (Optional)
S3_ENABLED=false
S3_BUCKET=churn-engine-artifacts
S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ============================================
# Feature Flags
# ============================================
ENABLE_BATCH_PREDICTIONS=true
ENABLE_RETENTION_STRATEGIES=true
ENABLE_REPORT_GENERATION=true
ENABLE_DRIFT_DETECTION=true
ENABLE_A_B_TESTING=false

# ============================================
# Performance & Optimization
# ============================================
ENABLE_QUERY_CACHING=true
ENABLE_RESPONSE_COMPRESSION=true
ENABLE_STATIC_FILE_CACHING=true
MAX_WORKERS=4
WORKER_TIMEOUT=120

# ============================================
# Development/Testing
# ============================================
TESTING=false
DEBUG_TOOLBAR_ENABLED=false
PROFILING_ENABLED=false
